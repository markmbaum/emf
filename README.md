# `emf`

![equations](docs/img/both-equations.png)

The `emf` package is a container for two subpackages (documentation accessible [here](docs/index.html)). The subpackages, called `fields` and `subcalc`, are for modeling electric and magnetic fields near power lines. The `fields` subpackage is for 2D models. It predicts electric and magnetic fields near sets of parallel power lines. The `subcalc` package is for 3D models, predicting the magnetic fields generated by complex, nonparallel collections of current carrying wire segments. Both subpackages can be used to build, compute, and analyze models without any other programs. They rely heavily on `numpy`, `pandas`, and `matplotlib`, but the EMF calculations do not rely on algorithms from any external libraries or legacy code. For 2D models in `emf.fields`, the fields calculations are done only in Python. For 3D models in `emf.subcalc`, a [C extension](emf/subcalc/lift/lift.c) is used to speed up the intensive number crunching.

Both `fields` and `subcalc` were originally meant to supplement older modeling programs but eventually became complete replacements of them. Thus, both packages are styled after the older programs and contain a fair amount of functionality for working with those programs. Both `fields` and `subcalc` also have specially formatted excel/csv templates for storing input data. Although these template files are never strictly necessary, they make the packages much more usable for those who only know a little bit of Python and they make larger-scale modeling projects more repeatable and less error prone. Neither package has a UI, just scripts and (optionally) template files.

### `emf.fields` resources

* [Further discussion](docs/README-fields.html)
* [Documentation](docs/emf.fields.html)
* [Notebook - `fields` modeling from scratch](docs/fields-workflow-from-scratch.html)
* [Notebook - optimizing underground circuits](docs/underground-line-optimization.html)
* [Notebook - using a `fields` template](docs/using-a-template.html)
* [Notebook - varying the depth of an underground circuit](docs/underground-delta-depth-test.html)

### `emf.subcalc` resources

* [Further discussion](docs/README-subcalc.html)
* [Documentation](docs/emf.subcalc.html)
* [Notebook - build a model, compute results, and make plots](docs/small-model-tutorial.html)
* [Notebook - using `emf.subcalc` templates](docs/tower-and-footprint-templates.html)
* [Notebook - sampling `Model` objects](docs/sampling-model-objects.html)
* [Notebook - working with SUBCALC input and output files](docs/working-with-SUBCALC-files.html)

### Installation

To use `emf` you must first install Python 2.7 and `emf`'s dependencies. `emf` relies on many other widely available Python libraries, which are listed below. [Anaconda](https://www.continuum.io/downloads) is a widely used distribution that includes everything you need to use `emf`.

Once Python and the relevant libraries are installed, you can install `emf` by running the `setup.py` script in the packages root directory. In a command prompt or terminal, simply navigate to the directory that contains `setup.py` and enter the following command.

```python
python setup.py install
```

If you download an updated version of `emf` or otherwise modify the package, you'll need to reinstall it by rerunning `setup.py` with the same command as above.

##### Notes

`emf` has mostly been used with Python 2.7. Early on it was used compatibly with Python 3.x, but compatibility hasn't been checked for a while.

##### Python Package Dependencies
`os`, `copy`, `numpy`, `scipy`, `ctypes`, `shutil`, `pandas`, `textwrap`, `itertools`, `matplotlib`
